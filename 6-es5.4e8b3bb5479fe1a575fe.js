function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{JNLe:function(e,t,i){"use strict";i.r(t);var n,r,a=i("ofXK"),s=i("3Pt+"),o=i("tyNb"),c=i("fXoL"),A=((n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Ib({type:n,selectors:[["app-cashier"]],decls:13,vars:0,consts:[[1,"cashier-wrapper"],[1,"cashier-menu"],[1,"cashier-menu-item"],["routerLink","/home",1,"button"],["routerLink","/game",1,"button"],[1,"cashier-footer"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"span"),c.Cc(5,"Home"),c.Sb(),c.Sb(),c.Sb(),c.Tb(6,"div",2),c.Tb(7,"div",4),c.Tb(8,"span"),c.Cc(9,"Game"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Pb(10,"router-outlet"),c.Tb(11,"div",5),c.Cc(12,"Powered by devtrip developers and contributors \xa9 www.devtrip.com 2012-2050"),c.Sb(),c.Sb())},directives:[o.d,o.f],styles:[".cashier-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;height:100vh;color:#666565;overflow:auto}.cashier-footer[_ngcontent-%COMP%]{justify-content:space-around;align-content:center;position:relative;color:#515151;width:100%;bottom:0}.cashier-footer[_ngcontent-%COMP%], .cashier-main[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;text-align:center}.cashier-main[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center}.cashier-menu[_ngcontent-%COMP%]{display:-webkit-box;display:flex;justify-content:space-around;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cashier-menu-item[_ngcontent-%COMP%]{width:48%;max-width:200px;position:relative}.button[_ngcontent-%COMP%]{font-size:1.3rem;line-height:2.5;position:absolute;top:100%;height:1.25 * 3;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;z-index:106;outline:0;cursor:pointer;border:none;border-radius:0 0 1.5rem 1.5rem;box-shadow:0 5px 50px #094060;-webkit-transition:all .1s linear;transition:all .1s linear}.button[_ngcontent-%COMP%]:hover{background-color:darken(#d7f3f7,10%)}.button[_ngcontent-%COMP%]:active{-webkit-transform:translateY(-5px);transform:translateY(-5px);background-color:darken(#d6f0f5,10%);box-shadow:0 0 10px #f6f9fa}"]}),n),l=i("N3s9"),u=i("RbBG"),d=i("LRne"),m=i("vkgz"),p=i("JIr8"),b=((r=function(){function e(t){_classCallCheck(this,e),this._restService=t,this.appServerUrl="https://dtdmapi.000webhostapp.com/api/"}return _createClass(e,[{key:"registerPaymentRequest",value:function(e){return this._restService.getNonce("registerapp",e,"dtapps").pipe(Object(m.a)((function(e){return console.log("updated payment from here "+JSON.stringify(e))})),Object(p.a)(this.handleError("updatePayment",[])))}},{key:"validatePayment",value:function(e){return this._restService.getNonce("getpaymentstatus",e,"dtapps").pipe(Object(m.a)((function(e){return console.log("updated payment from here "+JSON.stringify(e))})),Object(p.a)(this.handleError("updatePayment",[])))}},{key:"requestPayment",value:function(e){return e.redirect_url=this.appServerUrl+"/dtapps/paymentReciept/?cookie="+e.cookie,e.webhook=this.appServerUrl+"/dtapps/addpaymentdata/?cookie="+e.cookie,this._restService.getNonce("raisePaymentRequest",e,"dtapps").pipe(Object(m.a)((function(e){return console.log("updated payment from here "+JSON.stringify(e))})),Object(p.a)(this.handleError("updatePayment",[])))}},{key:"validatePaymentStatus",value:function(e){return this._restService.getNonce("validatepaymentstatus",e,"dtapps").pipe(Object(m.a)((function(e){return console.log("updated payment from here "+JSON.stringify(e))})),Object(p.a)(this.handleError("updatePayment",[])))}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",t=arguments.length>1?arguments[1]:void 0;return function(i){return console.error(i),console.log("".concat(e," failed: ").concat(i.message)),Object(d.a)(t)}}}]),e}()).\u0275fac=function(e){return new(e||r)(c.bc(u.a))},r.\u0275prov=c.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r);function h(e,t){1&e&&(c.Tb(0,"div"),c.Cc(1,"Email is required"),c.Sb())}function f(e,t){if(1&e&&(c.Tb(0,"div",13),c.Ac(1,h,2,0,"div",14),c.Sb()),2&e){var i=c.hc();c.Bb(1),c.mc("ngIf",i.f.username.errors.required)}}function g(e,t){1&e&&(c.Tb(0,"div"),c.Cc(1,"Mobile Number required"),c.Sb())}function y(e,t){1&e&&(c.Tb(0,"div"),c.Cc(1,"Mobile Number is not valid"),c.Sb())}function v(e,t){if(1&e&&(c.Tb(0,"div",13),c.Ac(1,g,2,0,"div",14),c.Ac(2,y,2,0,"div",14),c.Sb()),2&e){var i=c.hc();c.Bb(1),c.mc("ngIf",i.f.mobile.errors.required),c.Bb(1),c.mc("ngIf",i.f.mobile.errors.minlength)}}function w(e,t){if(1&e&&(c.Tb(0,"option",15),c.Cc(1),c.Sb()),2&e){var i=t.$implicit;c.mc("value",i.value),c.Bb(1),c.Ec(" ",i.price," ")}}function C(e,t){1&e&&c.Pb(0,"img",16)}var k,S,I=function(e){return{"is-invalid":e}},P=[{path:"",component:A,data:{},children:[{path:"",component:(k=function(){function e(t,i,n){_classCallCheck(this,e),this._formBuilder=t,this._authService=i,this._paymentService=n,this.loading=!1,this.submitted=!1,this.displaymessage="",this.amountValue="100",this.amounts=[{value:"100",price:"Inr 100"},{value:"200",price:"Inr 200"},{value:"500",price:"Inr 500"},{value:"100",price:"Inr 1000"},{value:"2000",price:"Inr 2000"},{value:"5000",price:"Inr 5000"},{value:"10000",price:"Inr 10000"}]}return _createClass(e,[{key:"ngOnInit",value:function(){this.paymentForm=this._formBuilder.group({username:["",s.l.required],mobile:["",[s.l.required,s.l.minLength(10),s.l.maxLength(10)]]}),this.yesBtnVisible=!0,this.yesBtnCallback=this.onSubmit,this.displaymessage="Please fill the form and proceed to payment."}},{key:"ngOnDestroy",value:function(){}},{key:"amountChange",value:function(e){this.amountValue=e}},{key:"onSubmit",value:function(){var e=this;if(this.submitted=!0,!this.paymentForm.invalid){this.loading=!0,this.displaymessage="Registering this request, with entered email and mobile number. Your future communication related top this payment, happen using these details. ",this.yesBtnVisible=!1,this.yesBtnCallback=this.setPurchaseState;var t=new Object;this.userEnteredEmail=this.f.username.value,this.userEnteredMobile=this.f.mobile.value,t.name="Devtrip Multiplayer Player Games",t.version="0.1.1",t.description="To get credit of "+this.amountValue,t.userkey=this._authService.currentUser.cookie?this._authService.currentUser.cookie:"NA",t.useremail=this.f.username.value,t.useremobile=this.f.mobile.value,t.paymentstatus=2,t.raiserequestfromserver=!0,this._paymentService.registerPaymentRequest(t).subscribe((function(t){t.success?e.setPurchaseState(t):e.setRequestRegisterError(t)}))}}},{key:"setPurchaseState",value:function(e){var t=this;this.displaymessage="You will be redirected to our payment partner soon.";var i=new Object;i.purpose="To get credit of "+this.amountValue+" for Devtrip Multiplayer Player Games version 0.1.1",i.amount=Number(this.amountValue),i.buyer_name=this._authService.currentUser.name?this._authService.currentUser.name:"Guest",i.email=this.userEnteredEmail,i.phone=this.userEnteredMobile,i.send_email=!0,i.send_sms=!0,i.cookie=e.cookie,i.allow_repeated_payments=!1,this._paymentService.requestPayment(i).subscribe((function(e){e.success?t.setVerifyPaymentState(e):t.setRequestRegisterError(e)}))}},{key:"setVerifyPaymentState",value:function(e){this.loading=!1,this.displaymessage="Your payment process is initiated, you will redirected to our payment partner soon.. Please stay with us and after completing this payment, Return here and click on proceed to add credit with your account, within 5 minutes.",this.paymentInitResponse=e;var t=JSON.parse(e.response.body);window.open(t.payment_request.longurl,"_blank"),this.yesBtnVisible=!0,this.yesBtnCallback=this.onVerifyPaymentRequest}},{key:"onVerifyPaymentRequest",value:function(){var e=this;this.loading=!0,this.displaymessage="Validating your payment, please stay with us. You will be auto redirected to account page after successful validation.",this.yesBtnVisible=!1;var t=new Object;this.paymentInitResponse?(t.id=JSON.parse(this.paymentInitResponse.response.body).payment_request.id,localStorage.setItem("paymentid",t.id)):localStorage.getItem("paymentid")&&(t.id=localStorage.getItem("paymentid")),this._paymentService.validatePaymentStatus(t).subscribe((function(t){t.response.payment_request&&"Credit"==t.response.payment_request.payments[0].status?e.setVerifiedPaymentState(t):e.setVrificationError(t)}))}},{key:"setVerifiedPaymentState",value:function(e){localStorage.setItem("paymentid",""),localStorage.clear(),this._authService.currentUser.usercredit=Number(this._authService.currentUser.usercredit)+Number(this.amountValue),this._authService.updateUser(this._authService.currentUser).subscribe(),this.loading=!1,this.displaymessage="Your payment is processed successusfully and amount credited to your user account. Please continue with game play.",this.yesBtnVisible=!0,this.loading=!1}},{key:"setVrificationError",value:function(e){this.loading=!1,this.displaymessage="Your payment is not processed as par our payment partener record. Please pay first either from email link or the link opened in new tab, and then select verify payment. Or send a mail to devtrip.dev@gmail.com if facing any issue.",this.yesBtnVisible=!0,this.yesBtnCallback=this.onVerifyPaymentRequest}},{key:"setRequestRegisterError",value:function(e){this.displaymessage=e.ops?e.ops:e.error}},{key:"f",get:function(){return this.paymentForm.controls}}]),e}(),k.\u0275fac=function(e){return new(e||k)(c.Ob(s.b),c.Ob(l.a),c.Ob(b))},k.\u0275cmp=c.Ib({type:k,selectors:[["app-cashierdashboard"]],decls:24,vars:15,consts:[[1,"cashier-wrapper"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","username","placeholder","User Name (Email)",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","mobile","placeholder","Mobile Number",1,"form-control",3,"ngClass"],["className","amount-value"],["id","entry_select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group-btn",3,"hidden"],[3,"disabled"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["routerLink","/game",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Tb(1,"label"),c.Cc(2),c.Sb(),c.Pb(3,"br"),c.Tb(4,"form",1),c.fc("ngSubmit",(function(e){return t.yesBtnCallback()})),c.Tb(5,"div",2),c.Pb(6,"input",3),c.Ac(7,f,2,1,"div",4),c.Sb(),c.Pb(8,"br"),c.Tb(9,"div",2),c.Pb(10,"input",5),c.Ac(11,v,3,2,"div",4),c.Sb(),c.Pb(12,"br"),c.Tb(13,"div",6),c.Cc(14,"Add Amount: "),c.Tb(15,"select",7),c.fc("change",(function(e){return t.amountChange(e.currentTarget.value)})),c.Ac(16,w,2,2,"option",8),c.Sb(),c.Sb(),c.Pb(17,"br"),c.Tb(18,"div",9),c.Tb(19,"button",10),c.Cc(20,"Proceed "),c.Ac(21,C,1,0,"img",11),c.Sb(),c.Tb(22,"button",12),c.Cc(23,"Cancel"),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.Bb(2),c.Dc(t.displaymessage),c.Bb(2),c.mc("formGroup",t.paymentForm),c.Bb(2),c.mc("ngClass",c.pc(11,I,t.submitted&&t.f.username.errors)),c.Bb(1),c.mc("ngIf",t.submitted&&t.f.username.errors),c.Bb(3),c.mc("ngClass",c.pc(13,I,t.submitted&&t.f.mobile.errors)),c.Bb(1),c.mc("ngIf",t.submitted&&t.f.mobile.errors),c.Bb(5),c.mc("ngForOf",t.amounts),c.Bb(2),c.mc("hidden",t.yesBtnVisible),c.Bb(1),c.mc("disabled",t.loading),c.Bb(2),c.mc("ngIf",t.loading),c.Bb(1),c.mc("disabled",t.loading))},directives:[s.n,s.i,s.d,s.a,s.h,s.c,a.i,a.k,a.j,o.d,s.j,s.m],styles:[".cashier-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;height:94vh;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;color:#000}.form-group-btn[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.form-group[_ngcontent-%COMP%], .form-group-btn[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal;justify-content:space-around;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.form-group[_ngcontent-%COMP%]{-webkit-box-orient:vertical;flex-direction:column}input[_ngcontent-%COMP%]{width:200px;height:5vh}"]}),k)}]}],E=((S=function e(){_classCallCheck(this,e)}).routes=P,S.\u0275mod=c.Mb({type:S}),S.\u0275inj=c.Lb({factory:function(e){return new(e||S)},imports:[[o.e.forChild(P)],o.e]}),S);i.d(t,"CashierModule",(function(){return B}));var M,B=((M=function e(){_classCallCheck(this,e)}).\u0275mod=c.Mb({type:M}),M.\u0275inj=c.Lb({factory:function(e){return new(e||M)},imports:[[a.b,E,s.e,s.k]]}),M)}}]);